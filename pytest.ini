[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for selective test running
markers =
    db: Database layer tests (storage/db.py)
    api: API endpoint tests (Flask routes)
    security: Security hardening tests (CSRF, host validation, rate limiting)
    async_jobs: Async job system tests
    projects: Project management features
    companies: Company CRUD, bulk actions, enrichment
    taxonomy: Taxonomy tree, categories, review, quality
    canvas: Canvas workspace and AI diagram generation
    data: Export, import, stats, charts, tags, views
    processing: Batch processing pipeline, triage, jobs
    research: Research sessions, templates, reports
    ai: AI discovery, chat, find-similar, models
    discovery: Feature landscape, gap analysis, contexts
    dimensions: Custom dimensions CRUD, values, AI populate
    entities: Entity system — schema, types, CRUD, attributes, relationships, evidence
    capture: Capture engine — file storage, website capture, document download, upload
    extraction: Extraction pipeline — AI extraction, review queue, contradiction detection
    features: Feature standardisation — canonical vocabulary, mappings, merge, resolve
    lenses: Analysis lenses — competitive matrix, gaps, positioning, pricing, design, temporal
    reports: Reporting & synthesis — templates, generation, AI reports, CRUD, export
    monitoring: Intelligence & monitoring — monitors, checks, change feed, auto-setup, stats
    insights: Insights & hypotheses — pattern detection, hypothesis tracking, confidence scoring
    settings: App settings, share tokens, backups, logs, notifications
    static: Static file serving tests
    slow: Tests that take >5 seconds (e.g. async polling)

# Short test summary info
addopts = -v --tb=short --strict-markers
